(this["webpackJsonpservice-center"]=this["webpackJsonpservice-center"]||[]).push([[0],{25:function(e,t,a){e.exports=a(39)},39:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(20),m=a.n(c),r=a(14),s=a(2),o=a(5),i=a(21),u=a(6);const p=Object(i.a)({apiKey:"AIzaSyBhvAhySTY9NE10_oenVOYxDYx20pafY3w",authDomain:"servicecenter-tetser.firebaseapp.com",projectId:"servicecenter-tetser",storageBucket:"servicecenter-tetser.firebasestorage.app",messagingSenderId:"177149149059",appId:"1:177149149059:web:d9138e71616742b30640b6"}),E=Object(u.e)(p);var b=a(23);var d=()=>{const[e,t]=Object(n.useState)({clientName:"",phone:"",city:"\u0410\u0441\u0442\u0430\u043d\u0430",equipment:[{type:"",customType:"",name:"",serial:""}],date:"",technician:"",status:"\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430",notes:""}),a=(a,n,l)=>{const c=[...e.equipment];c[a][n]=l,t(Object(o.a)(Object(o.a)({},e),{},{equipment:c}))},c=a=>{t(Object(o.a)(Object(o.a)({},e),{},{[a.target.name]:a.target.value}))};return l.a.createElement("div",{className:"container mt-5"},l.a.createElement("div",{className:"card shadow"},l.a.createElement("div",{className:"card-header bg-primary text-white"},l.a.createElement("h4",{className:"mb-0"},"\ud83d\udccb \u041f\u0440\u0438\u0451\u043c \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f")),l.a.createElement("div",{className:"card-body"},l.a.createElement("form",{onSubmit:async a=>{a.preventDefault();const n=Object(o.a)(Object(o.a)({},e),{},{id:Object(b.v4)()});try{await Object(u.f)(Object(u.c)(E,"orders",n.id),n),alert("\u0417\u0430\u044f\u0432\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430!")}catch(l){return console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u0437\u0430\u044f\u0432\u043a\u0438:",l),void alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438!")}t({clientName:"",phone:"",city:"\u0410\u0441\u0442\u0430\u043d\u0430",equipment:[{type:"",customType:"",name:"",serial:""}],date:"",technician:"",status:"\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430",notes:""})}},l.a.createElement("div",{className:"row g-3"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("label",{className:"form-label"},"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430"),l.a.createElement("input",{type:"text",name:"clientName",className:"form-control",value:e.clientName,onChange:c,required:!0})),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("label",{className:"form-label"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),l.a.createElement("input",{type:"tel",name:"phone",className:"form-control",value:e.phone,onChange:c,required:!0})),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("label",{className:"form-label"},"\u0413\u043e\u0440\u043e\u0434"),l.a.createElement("select",{name:"city",className:"form-select",value:e.city,onChange:c},l.a.createElement("option",null,"\u0410\u0441\u0442\u0430\u043d\u0430"),l.a.createElement("option",null,"\u0410\u043b\u043c\u0430\u0442\u044b"))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("label",{className:"form-label"},"\u0414\u0430\u0442\u0430 \u043f\u0440\u0438\u0451\u043c\u0430"),l.a.createElement("input",{type:"date",name:"date",className:"form-control",value:e.date,onChange:c,required:!0})),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("label",{className:"form-label"},"\u0418\u043c\u044f \u0442\u0435\u0445\u043d\u0438\u043a\u0430"),l.a.createElement("select",{className:"form-select mb-3",name:"technician",value:e.technician,onChange:c,required:!0},l.a.createElement("option",{value:""},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0435\u0445\u043d\u0438\u043a\u0430"),l.a.createElement("option",{value:"\u041c\u0430\u0434\u0438"},"\u041c\u0430\u0434\u0438"),l.a.createElement("option",{value:"\u0415\u0440\u043c\u0430\u0445\u0430\u043d"},"\u0415\u0440\u043c\u0430\u0445\u0430\u043d"))),l.a.createElement("div",{className:"col-12"},l.a.createElement("label",{className:"form-label"},"\u0417\u0430\u043c\u0435\u0442\u043a\u0438"),l.a.createElement("textarea",{name:"notes",className:"form-control",rows:"3",value:e.notes,onChange:c})),l.a.createElement("hr",{className:"my-4"}),l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-3"},"\ud83d\udee0 \u041e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435"),e.equipment.map((n,c)=>l.a.createElement("div",{key:c,className:"border p-2 mb-2 rounded"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("label",null,"\u0422\u0438\u043f \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f"),l.a.createElement("select",{className:"form-control",value:n.type,onChange:e=>a(c,"type",e.target.value)},l.a.createElement("option",{value:""},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435..."),l.a.createElement("option",{value:"\u041c\u043e\u043d\u043e\u0431\u043b\u043e\u043a"},"\u041c\u043e\u043d\u043e\u0431\u043b\u043e\u043a"),l.a.createElement("option",{value:"\u0421\u043a\u0430\u043d\u0435\u0440 \u0428\u041a"},"\u0421\u043a\u0430\u043d\u0435\u0440 \u0428\u041a"),l.a.createElement("option",{value:"\u041f\u0440\u0438\u043d\u0442\u0435\u0440 \u0427"},"\u041f\u0440\u0438\u043d\u0442\u0435\u0440 \u0427"),l.a.createElement("option",{value:"\u041f\u0440\u0438\u043d\u0442\u0435\u0440 \u042d"},"\u041f\u0440\u0438\u043d\u0442\u0435\u0440 \u042d"),l.a.createElement("option",{value:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u044b\u0435 \u0432\u0435\u0441\u044b"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u044b\u0435 \u0432\u0435\u0441\u044b"),l.a.createElement("option",{value:"\u0414\u0440\u0443\u0433\u043e\u0435"},"\u0414\u0440\u0443\u0433\u043e\u0435")),"\u0414\u0440\u0443\u0433\u043e\u0435"===n.type&&l.a.createElement("input",{type:"text",className:"form-control mt-2",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0442\u0438\u043f",value:n.customType,onChange:e=>a(c,"customType",e.target.value)})),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("label",null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),l.a.createElement("input",{className:"form-control",value:n.name,onChange:e=>a(c,"name",e.target.value)})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,"\u0421\u0435\u0440\u0438\u0439\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440"),l.a.createElement("input",{className:"form-control",value:n.serial,onChange:e=>a(c,"serial",e.target.value)})),l.a.createElement("div",{className:"col-md-1 d-flex align-items-end"},l.a.createElement("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>(a=>{const n=[...e.equipment];n.splice(a,1),t(Object(o.a)(Object(o.a)({},e),{},{equipment:n}))})(c)},"\u2715"))))),l.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>{t(Object(o.a)(Object(o.a)({},e),{},{equipment:[...e.equipment,{type:"",customType:"",name:"",serial:""}]}))}},"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435")),l.a.createElement("div",{className:"col-12 mt-4"},l.a.createElement("button",{type:"submit",className:"btn btn-success w-100"},"\ud83d\udcbe \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443")))))))},v=a(24);var N=e=>{let{order:t,onUpdate:a,onDelete:c}=e;const[m,r]=Object(n.useState)(!1),[s,i]=Object(n.useState)(Object(o.a)({},t)),p=e=>{const{name:t,value:a}=e.target;i(e=>Object(o.a)(Object(o.a)({},e),{},{[t]:a}))};return l.a.createElement("div",{className:"card mb-3 shadow-sm"},l.a.createElement("div",{className:"card-body"},m?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"mb-2"},l.a.createElement("label",null,"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430"),l.a.createElement("input",{className:"form-control",name:"clientName",value:s.clientName,onChange:p})),l.a.createElement("div",{className:"mb-2"},l.a.createElement("label",null,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),l.a.createElement("input",{className:"form-control",name:"phone",value:s.phone,onChange:p})),l.a.createElement("div",{className:"mb-2"},l.a.createElement("label",null,"\u0421\u0442\u0430\u0442\u0443\u0441"),l.a.createElement("select",{className:"form-control",name:"status",value:s.status,onChange:p},l.a.createElement("option",{value:"\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430"},"\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430"),l.a.createElement("option",{value:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"},"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"),l.a.createElement("option",{value:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e"},"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e"))),l.a.createElement("div",{className:"mb-2"},l.a.createElement("label",null,"\u0417\u0430\u043c\u0435\u0442\u043a\u0438"),l.a.createElement("textarea",{className:"form-control",name:"notes",value:s.notes,onChange:p})),l.a.createElement("button",{onClick:async()=>{try{const e=Object(u.c)(E,"orders",t.id);await Object(u.g)(e,s),a(s),r(!1)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0437\u0430\u044f\u0432\u043a\u0438:",e)}},className:"btn btn-success btn-sm me-2"},"\ud83d\udcbe \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),l.a.createElement("button",{onClick:()=>r(!1),className:"btn btn-secondary btn-sm me-2"},"\u274c \u041e\u0442\u043c\u0435\u043d\u0430")):l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",{className:"card-title"},t.clientName),l.a.createElement("p",{className:"card-text"},l.a.createElement("strong",null,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d:")," ",t.phone," ",l.a.createElement("br",null),l.a.createElement("strong",null,"\u0413\u043e\u0440\u043e\u0434:")," ",t.city," ",l.a.createElement("br",null),l.a.createElement("strong",null,"\u0414\u0430\u0442\u0430:")," ",t.date," ",l.a.createElement("br",null),l.a.createElement("strong",null,"\u0422\u0435\u0445\u043d\u0438\u043a:")," ",t.technician," ",l.a.createElement("br",null),l.a.createElement("strong",null,"\u0421\u0442\u0430\u0442\u0443\u0441:")," ",t.status," ",l.a.createElement("br",null),l.a.createElement("strong",null,"\u0417\u0430\u043c\u0435\u0442\u043a\u0438:")," ",t.notes),t.equipment&&t.equipment.length>0&&l.a.createElement("div",{className:"mb-3"},l.a.createElement("strong",null,"\u041e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435:"),l.a.createElement("ul",{className:"mt-2"},t.equipment.map((e,t)=>l.a.createElement("li",{key:t},"\u0414\u0440\u0443\u0433\u043e\u0435"===e.type?e.customType:e.type," \u2014 ",e.name," (SN: ",e.serial,")")))),l.a.createElement("button",{onClick:()=>r(!0),className:"btn btn-primary btn-sm me-2"},"\u270f\ufe0f \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),l.a.createElement("button",{onClick:async()=>{if(window.confirm("\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443?"))try{await Object(u.b)(Object(u.c)(E,"orders",t.id)),c(t.id)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438:",e)}},className:"btn btn-danger btn-sm me-2"},"\ud83d\uddd1 \u0423\u0434\u0430\u043b\u0438\u0442\u044c"),l.a.createElement("button",{onClick:()=>{const e=new v.a;e.text("\u0410\u043a\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0445 \u0440\u0430\u0431\u043e\u0442",20,20),e.text("\u041a\u043b\u0438\u0435\u043d\u0442: ".concat(t.clientName),20,30),e.text("\u0422\u0435\u043b\u0435\u0444\u043e\u043d: ".concat(t.phone),20,40),e.text("\u0413\u043e\u0440\u043e\u0434: ".concat(t.city),20,50),e.text("\u0422\u0435\u0445\u043d\u0438\u043a: ".concat(t.technician),20,60),e.text("\u0414\u0430\u0442\u0430: ".concat(t.date),20,70),e.text("\u0421\u0442\u0430\u0442\u0443\u0441: ".concat(t.status),20,80),e.text("\u0417\u0430\u043c\u0435\u0442\u043a\u0438: ".concat(t.notes),20,90),e.text("\u041e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435:",20,110),t.equipment.forEach((t,a)=>{const n="\u0414\u0440\u0443\u0433\u043e\u0435"===t.type?t.customType:t.type;e.text("".concat(a+1,". ").concat(n,", ").concat(t.name,", SN: ").concat(t.serial),25,120+10*a)}),e.save("\u0417\u0430\u044f\u0432\u043a\u0430_".concat(t.clientName,".pdf"))},className:"btn btn-outline-secondary btn-sm"},"\ud83d\udcc4 \u0421\u043a\u0430\u0447\u0430\u0442\u044c \u0410\u0412\u0420"))))};var y=()=>{const[e,t]=Object(n.useState)([]),[a,c]=Object(n.useState)([]),[m,r]=Object(n.useState)({city:"",equipmentType:"",technician:"",status:""}),s=e=>{var t;return null!==(t={"\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430":0,"\u0420\u0435\u043c\u043e\u043d\u0442":1,"\u0413\u043e\u0442\u043e\u0432\u043e":2}[e])&&void 0!==t?t:99};Object(n.useEffect)(()=>{(async()=>{const e=(await Object(u.d)(Object(u.a)(E,"orders"))).docs.map(e=>Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id}));e.sort((e,t)=>Math.min(...e.equipment.map(e=>s(e.status)))-Math.min(...t.equipment.map(e=>s(e.status)))),t(e),d(e)})()},[]);const i=async(a,n)=>{await Object(u.f)(Object(u.c)(E,"orders",n.id||"order-".concat(a)),n);const l=[...e];l[a]=n,t(l),d(l)},p=async a=>{const n=e[a];n.id&&await Object(u.b)(Object(u.c)(E,"orders",n.id));const l=[...e];l.splice(a,1),t(l),d(l)},b=t=>{const{name:a,value:n}=t.target,l=Object(o.a)(Object(o.a)({},m),{},{[a]:n});r(l),d(e,l)},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m,a=[...e];t.city&&(a=a.filter(e=>e.city===t.city)),t.technician&&(a=a.filter(e=>e.technician===t.technician)),t.equipmentType&&(a=a.filter(e=>e.equipment.some(e=>e.type===t.equipmentType||e.customType===t.equipmentType))),t.status&&(a=a.map(e=>{const a=e.equipment.filter(e=>e.status===t.status);return a.length>0?Object(o.a)(Object(o.a)({},e),{},{filteredEquipment:a}):null}).filter(Boolean)),a.sort((e,t)=>Math.min(...e.equipment.map(e=>s(e.status)))-Math.min(...t.equipment.map(e=>s(e.status)))),c(a)},v=Array.from(new Set(e.flatMap(e=>e.equipment.map(e=>e.customType||e.type).filter(Boolean))));return l.a.createElement("div",{className:"container mt-4"},l.a.createElement("div",{className:"d-flex justify-content-between align-items-center mb-2"},l.a.createElement("h4",null,"\ud83d\udce6 \u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u044f\u0432\u043e\u043a"),l.a.createElement("span",{className:"badge bg-primary fs-6"},"\u041a\u043e\u043b-\u0432\u043e \u0437\u0430\u044f\u0432\u043e\u043a: ",a.length)),l.a.createElement("div",{className:"card p-3 mb-4 shadow-sm"},l.a.createElement("h5",null,"\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u0437\u0430\u044f\u0432\u043e\u043a"),l.a.createElement("div",{className:"row g-3 mt-2"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,"\u0413\u043e\u0440\u043e\u0434"),l.a.createElement("select",{name:"city",className:"form-select",value:m.city,onChange:b},l.a.createElement("option",{value:""},"\u0412\u0441\u0435 \u0433\u043e\u0440\u043e\u0434\u0430"),l.a.createElement("option",{value:"\u0410\u0441\u0442\u0430\u043d\u0430"},"\u0410\u0441\u0442\u0430\u043d\u0430"),l.a.createElement("option",{value:"\u0410\u043b\u043c\u0430\u0442\u044b"},"\u0410\u043b\u043c\u0430\u0442\u044b"))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,"\u0422\u0438\u043f \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f"),l.a.createElement("select",{name:"equipmentType",className:"form-select",value:m.equipmentType,onChange:b},l.a.createElement("option",{value:""},"\u0412\u0441\u0435 \u0442\u0438\u043f\u044b"),v.map((e,t)=>l.a.createElement("option",{key:t,value:e},e)))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,"\u0422\u0435\u0445\u043d\u0438\u043a"),l.a.createElement("select",{name:"technician",className:"form-select",value:m.technician,onChange:b},l.a.createElement("option",{value:""},"\u0412\u0441\u0435 \u0442\u0435\u0445\u043d\u0438\u043a\u0438"),l.a.createElement("option",{value:"\u0415\u0440\u043c\u0430\u0445\u0430\u043d"},"\u0415\u0440\u043c\u0430\u0445\u0430\u043d"),l.a.createElement("option",{value:"\u041c\u0430\u0434\u0438"},"\u041c\u0430\u0434\u0438"))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,"\u0421\u0442\u0430\u0442\u0443\u0441 \u0440\u0435\u043c\u043e\u043d\u0442\u0430"),l.a.createElement("select",{name:"status",className:"form-select",value:m.status,onChange:b},l.a.createElement("option",{value:""},"\u0412\u0441\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u044b"),l.a.createElement("option",{value:"\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430"},"\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430"),l.a.createElement("option",{value:"\u0420\u0435\u043c\u043e\u043d\u0442"},"\u0420\u0435\u043c\u043e\u043d\u0442"),l.a.createElement("option",{value:"\u0413\u043e\u0442\u043e\u0432\u043e"},"\u0413\u043e\u0442\u043e\u0432\u043e"))))),a.length>0?a.map(e=>l.a.createElement(N,{key:e.id,order:e,onUpdate:i,onDelete:p})):l.a.createElement("div",{className:"alert alert-info"},"\u0417\u0430\u044f\u0432\u043a\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b."))};var h=function(){return l.a.createElement(r.a,null,l.a.createElement("div",{className:"container mt-3"},l.a.createElement("nav",{className:"mb-4"},l.a.createElement(r.b,{className:"btn btn-primary me-2",to:"/"},"\u041f\u0440\u0438\u0451\u043c \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f"),l.a.createElement(r.b,{className:"btn btn-secondary",to:"/orders"},"\u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u044f\u0432\u043e\u043a")),l.a.createElement(s.c,null,l.a.createElement(s.a,{path:"/",element:l.a.createElement(d,null)}),l.a.createElement(s.a,{path:"/orders",element:l.a.createElement(y,null)}))))};a(38);m.a.createRoot(document.getElementById("root")).render(l.a.createElement(h,null))}},[[25,1,3]]]);
//# sourceMappingURL=main.1074b8bb.chunk.js.map