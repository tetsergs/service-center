(this["webpackJsonpservice-center"]=this["webpackJsonpservice-center"]||[]).push([[0],{22:function(e,a,t){e.exports=t(36)},36:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),c=t(18),m=t.n(c),r=t(12),s=t(2),o=t(4),i=t(19),u=t(5);const p=Object(i.a)({apiKey:"AIzaSyBhvAhySTY9NE10_oenVOYxDYx20pafY3w",authDomain:"servicecenter-tetser.firebaseapp.com",projectId:"servicecenter-tetser",storageBucket:"servicecenter-tetser.firebasestorage.app",messagingSenderId:"177149149059",appId:"1:177149149059:web:d9138e71616742b30640b6"}),E=Object(u.e)(p);var b=t(21);var d=()=>{const[e,a]=Object(n.useState)({clientName:"",phone:"",city:"\u0410\u0441\u0442\u0430\u043d\u0430",equipment:[{type:"",customType:"",name:"",serial:""}],date:"",technician:"",status:"\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430",notes:""}),t=(t,n,l)=>{const c=[...e.equipment];c[t][n]=l,a(Object(o.a)(Object(o.a)({},e),{},{equipment:c}))},c=t=>{a(Object(o.a)(Object(o.a)({},e),{},{[t.target.name]:t.target.value}))};return l.a.createElement("div",{className:"container mt-5"},l.a.createElement("div",{className:"card shadow"},l.a.createElement("div",{className:"card-header bg-primary text-white"},l.a.createElement("h4",{className:"mb-0"},"\ud83d\udccb \u041f\u0440\u0438\u0451\u043c \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f")),l.a.createElement("div",{className:"card-body"},l.a.createElement("form",{onSubmit:async t=>{t.preventDefault();const n=Object(o.a)(Object(o.a)({},e),{},{id:Object(b.v4)()});try{await Object(u.f)(Object(u.c)(E,"orders",n.id),n),alert("\u0417\u0430\u044f\u0432\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430!")}catch(l){return console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u0437\u0430\u044f\u0432\u043a\u0438:",l),void alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438!")}a({clientName:"",phone:"",city:"\u0410\u0441\u0442\u0430\u043d\u0430",equipment:[{type:"",customType:"",name:"",serial:""}],date:"",technician:"",status:"\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430",notes:""})}},l.a.createElement("div",{className:"row g-3"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("label",{className:"form-label"},"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430"),l.a.createElement("input",{type:"text",name:"clientName",className:"form-control",value:e.clientName,onChange:c,required:!0})),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("label",{className:"form-label"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),l.a.createElement("input",{type:"tel",name:"phone",className:"form-control",value:e.phone,onChange:c,required:!0})),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("label",{className:"form-label"},"\u0413\u043e\u0440\u043e\u0434"),l.a.createElement("select",{name:"city",className:"form-select",value:e.city,onChange:c},l.a.createElement("option",null,"\u0410\u0441\u0442\u0430\u043d\u0430"),l.a.createElement("option",null,"\u0410\u043b\u043c\u0430\u0442\u044b"))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("label",{className:"form-label"},"\u0414\u0430\u0442\u0430 \u043f\u0440\u0438\u0451\u043c\u0430"),l.a.createElement("input",{type:"date",name:"date",className:"form-control",value:e.date,onChange:c,required:!0})),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("label",{className:"form-label"},"\u0418\u043c\u044f \u0442\u0435\u0445\u043d\u0438\u043a\u0430"),l.a.createElement("select",{className:"form-select mb-3",name:"technician",value:e.technician,onChange:c,required:!0},l.a.createElement("option",{value:""},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0435\u0445\u043d\u0438\u043a\u0430"),l.a.createElement("option",{value:"\u041c\u0430\u0434\u0438"},"\u041c\u0430\u0434\u0438"),l.a.createElement("option",{value:"\u0415\u0440\u043c\u0430\u0445\u0430\u043d"},"\u0415\u0440\u043c\u0430\u0445\u0430\u043d"))),l.a.createElement("div",{className:"col-12"},l.a.createElement("label",{className:"form-label"},"\u0417\u0430\u043c\u0435\u0442\u043a\u0438"),l.a.createElement("textarea",{name:"notes",className:"form-control",rows:"3",value:e.notes,onChange:c})),l.a.createElement("hr",{className:"my-4"}),l.a.createElement("div",{className:"col-12"},l.a.createElement("h5",{className:"mb-3"},"\ud83d\udee0 \u041e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435"),e.equipment.map((n,c)=>l.a.createElement("div",{key:c,className:"border p-2 mb-2 rounded"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement("label",null,"\u0422\u0438\u043f \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f"),l.a.createElement("select",{className:"form-control",value:n.type,onChange:e=>t(c,"type",e.target.value)},l.a.createElement("option",{value:""},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435..."),l.a.createElement("option",{value:"\u041c\u043e\u043d\u043e\u0431\u043b\u043e\u043a"},"\u041c\u043e\u043d\u043e\u0431\u043b\u043e\u043a"),l.a.createElement("option",{value:"\u0421\u043a\u0430\u043d\u0435\u0440 \u0428\u041a"},"\u0421\u043a\u0430\u043d\u0435\u0440 \u0428\u041a"),l.a.createElement("option",{value:"\u041f\u0440\u0438\u043d\u0442\u0435\u0440 \u0427"},"\u041f\u0440\u0438\u043d\u0442\u0435\u0440 \u0427"),l.a.createElement("option",{value:"\u041f\u0440\u0438\u043d\u0442\u0435\u0440 \u042d"},"\u041f\u0440\u0438\u043d\u0442\u0435\u0440 \u042d"),l.a.createElement("option",{value:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u044b\u0435 \u0432\u0435\u0441\u044b"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u044b\u0435 \u0432\u0435\u0441\u044b"),l.a.createElement("option",{value:"\u0414\u0440\u0443\u0433\u043e\u0435"},"\u0414\u0440\u0443\u0433\u043e\u0435")),"\u0414\u0440\u0443\u0433\u043e\u0435"===n.type&&l.a.createElement("input",{type:"text",className:"form-control mt-2",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0442\u0438\u043f",value:n.customType,onChange:e=>t(c,"customType",e.target.value)})),l.a.createElement("div",{className:"col-md-4"},l.a.createElement("label",null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),l.a.createElement("input",{className:"form-control",value:n.name,onChange:e=>t(c,"name",e.target.value)})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,"\u0421\u0435\u0440\u0438\u0439\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440"),l.a.createElement("input",{className:"form-control",value:n.serial,onChange:e=>t(c,"serial",e.target.value)})),l.a.createElement("div",{className:"col-md-1 d-flex align-items-end"},l.a.createElement("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>(t=>{const n=[...e.equipment];n.splice(t,1),a(Object(o.a)(Object(o.a)({},e),{},{equipment:n}))})(c)},"\u2715"))))),l.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>{a(Object(o.a)(Object(o.a)({},e),{},{equipment:[...e.equipment,{type:"",customType:"",name:"",serial:""}]}))}},"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435")),l.a.createElement("div",{className:"col-12 mt-4"},l.a.createElement("button",{type:"submit",className:"btn btn-success w-100"},"\ud83d\udcbe \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443")))))))};var v=e=>{let{order:a,onUpdate:t,onDelete:c}=e;const[m,r]=Object(n.useState)(!1),[s,i]=Object(n.useState)(a),p=e=>{const{name:a,value:t}=e.target;i(e=>Object(o.a)(Object(o.a)({},e),{},{[a]:t}))};return l.a.createElement("div",{className:"card mb-3 shadow-sm"},l.a.createElement("div",{className:"card-body"},m?l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{className:"form-control mb-2",name:"clientName",value:s.clientName,onChange:p}),l.a.createElement("input",{className:"form-control mb-2",name:"phone",value:s.phone,onChange:p}),l.a.createElement("select",{className:"form-control mb-2",name:"status",value:s.status,onChange:p},l.a.createElement("option",null,"\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430"),l.a.createElement("option",null,"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"),l.a.createElement("option",null,"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e")),l.a.createElement("button",{onClick:async()=>{try{const e=Object(u.c)(E,"orders",a.id);await Object(u.g)(e,s),t(s),r(!1)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0437\u0430\u044f\u0432\u043a\u0438:",e)}},className:"btn btn-success btn-sm me-2"},"\ud83d\udcbe \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),l.a.createElement("button",{onClick:()=>r(!1),className:"btn btn-secondary btn-sm"},"\u274c \u041e\u0442\u043c\u0435\u043d\u0430")):l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",{className:"card-title"},a.clientName),l.a.createElement("p",{className:"card-text"},l.a.createElement("strong",null,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d:")," ",a.phone,l.a.createElement("br",null),l.a.createElement("strong",null,"\u0422\u0435\u0445\u043d\u0438\u043a:")," ",a.technician,l.a.createElement("br",null),l.a.createElement("strong",null,"\u0421\u0442\u0430\u0442\u0443\u0441:")," ",a.status),l.a.createElement("button",{onClick:()=>r(!0),className:"btn btn-primary btn-sm me-2"},"\u270f\ufe0f \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),l.a.createElement("button",{onClick:async()=>{if(window.confirm("\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u0443 \u0437\u0430\u044f\u0432\u043a\u0443?"))try{await Object(u.b)(Object(u.c)(E,"orders",a.id)),c(a.id)}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438:",e)}},className:"btn btn-danger btn-sm"},"\ud83d\uddd1 \u0423\u0434\u0430\u043b\u0438\u0442\u044c"))))};var N=()=>{const[e,a]=Object(n.useState)([]),[t,c]=Object(n.useState)([]),[m,r]=Object(n.useState)({city:"",equipmentType:"",technician:"",status:""}),s=e=>{var a;return null!==(a={"\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430":0,"\u0420\u0435\u043c\u043e\u043d\u0442":1,"\u0413\u043e\u0442\u043e\u0432\u043e":2}[e])&&void 0!==a?a:99};Object(n.useEffect)(()=>{(async()=>{const e=(await Object(u.d)(Object(u.a)(E,"orders"))).docs.map(e=>Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id}));e.sort((e,a)=>Math.min(...e.equipment.map(e=>s(e.status)))-Math.min(...a.equipment.map(e=>s(e.status)))),a(e),d(e)})()},[]);const i=async(t,n)=>{await Object(u.f)(Object(u.c)(E,"orders",n.id||"order-".concat(t)),n);const l=[...e];l[t]=n,a(l),d(l)},p=async t=>{const n=e[t];n.id&&await Object(u.b)(Object(u.c)(E,"orders",n.id));const l=[...e];l.splice(t,1),a(l),d(l)},b=a=>{const{name:t,value:n}=a.target,l=Object(o.a)(Object(o.a)({},m),{},{[t]:n});r(l),d(e,l)},d=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m,t=[...e];a.city&&(t=t.filter(e=>e.city===a.city)),a.technician&&(t=t.filter(e=>e.technician===a.technician)),a.equipmentType&&(t=t.filter(e=>e.equipment.some(e=>e.type===a.equipmentType||e.customType===a.equipmentType))),a.status&&(t=t.map(e=>{const t=e.equipment.filter(e=>e.status===a.status);return t.length>0?Object(o.a)(Object(o.a)({},e),{},{filteredEquipment:t}):null}).filter(Boolean)),t.sort((e,a)=>Math.min(...e.equipment.map(e=>s(e.status)))-Math.min(...a.equipment.map(e=>s(e.status)))),c(t)},N=Array.from(new Set(e.flatMap(e=>e.equipment.map(e=>e.customType||e.type).filter(Boolean))));return l.a.createElement("div",{className:"container mt-4"},l.a.createElement("div",{className:"d-flex justify-content-between align-items-center mb-2"},l.a.createElement("h4",null,"\ud83d\udce6 \u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u044f\u0432\u043e\u043a"),l.a.createElement("span",{className:"badge bg-primary fs-6"},"\u041a\u043e\u043b-\u0432\u043e \u0437\u0430\u044f\u0432\u043e\u043a: ",t.length)),l.a.createElement("div",{className:"card p-3 mb-4 shadow-sm"},l.a.createElement("h5",null,"\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u0437\u0430\u044f\u0432\u043e\u043a"),l.a.createElement("div",{className:"row g-3 mt-2"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,"\u0413\u043e\u0440\u043e\u0434"),l.a.createElement("select",{name:"city",className:"form-select",value:m.city,onChange:b},l.a.createElement("option",{value:""},"\u0412\u0441\u0435 \u0433\u043e\u0440\u043e\u0434\u0430"),l.a.createElement("option",{value:"\u0410\u0441\u0442\u0430\u043d\u0430"},"\u0410\u0441\u0442\u0430\u043d\u0430"),l.a.createElement("option",{value:"\u0410\u043b\u043c\u0430\u0442\u044b"},"\u0410\u043b\u043c\u0430\u0442\u044b"))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,"\u0422\u0438\u043f \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f"),l.a.createElement("select",{name:"equipmentType",className:"form-select",value:m.equipmentType,onChange:b},l.a.createElement("option",{value:""},"\u0412\u0441\u0435 \u0442\u0438\u043f\u044b"),N.map((e,a)=>l.a.createElement("option",{key:a,value:e},e)))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,"\u0422\u0435\u0445\u043d\u0438\u043a"),l.a.createElement("select",{name:"technician",className:"form-select",value:m.technician,onChange:b},l.a.createElement("option",{value:""},"\u0412\u0441\u0435 \u0442\u0435\u0445\u043d\u0438\u043a\u0438"),l.a.createElement("option",{value:"\u0415\u0440\u043c\u0430\u0445\u0430\u043d"},"\u0415\u0440\u043c\u0430\u0445\u0430\u043d"),l.a.createElement("option",{value:"\u041c\u0430\u0434\u0438"},"\u041c\u0430\u0434\u0438"))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("label",null,"\u0421\u0442\u0430\u0442\u0443\u0441 \u0440\u0435\u043c\u043e\u043d\u0442\u0430"),l.a.createElement("select",{name:"status",className:"form-select",value:m.status,onChange:b},l.a.createElement("option",{value:""},"\u0412\u0441\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u044b"),l.a.createElement("option",{value:"\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430"},"\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430"),l.a.createElement("option",{value:"\u0420\u0435\u043c\u043e\u043d\u0442"},"\u0420\u0435\u043c\u043e\u043d\u0442"),l.a.createElement("option",{value:"\u0413\u043e\u0442\u043e\u0432\u043e"},"\u0413\u043e\u0442\u043e\u0432\u043e"))))),t.length>0?t.map(e=>l.a.createElement(v,{key:e.id,order:e,onUpdate:i,onDelete:p})):l.a.createElement("div",{className:"alert alert-info"},"\u0417\u0430\u044f\u0432\u043a\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b."))};var h=function(){return l.a.createElement(r.a,null,l.a.createElement("div",{className:"container mt-3"},l.a.createElement("nav",{className:"mb-4"},l.a.createElement(r.b,{className:"btn btn-primary me-2",to:"/"},"\u041f\u0440\u0438\u0451\u043c \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u044f"),l.a.createElement(r.b,{className:"btn btn-secondary",to:"/orders"},"\u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u044f\u0432\u043e\u043a")),l.a.createElement(s.c,null,l.a.createElement(s.a,{path:"/",element:l.a.createElement(d,null)}),l.a.createElement(s.a,{path:"/orders",element:l.a.createElement(N,null)}))))};t(35);m.a.createRoot(document.getElementById("root")).render(l.a.createElement(h,null))}},[[22,1,2]]]);
//# sourceMappingURL=main.469abb51.chunk.js.map